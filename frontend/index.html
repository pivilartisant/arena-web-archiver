<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Are.na Archiver</title>
    <link rel="stylesheet" href="/static/styles/style.css">
  </head>
<body>
  <fieldset>
    <legend>Are.na Web Archiver</legend>
<form 
    id="archive-form"
    hx-post="/archive/"
    hx-target="#response"
    hx-indicator=".htmx-indicator"
    hx-on::after-request="if(event.detail.successful) this.reset()"
    hx-on::before-request="document.getElementById('response').innerHTML = ''"
    hx-on::before-request="document.getElementById('serious-errors').innerHTML = ''"
    hx-on::before-request="document.getElementById('not-found').innerHTML = ''"
    hx-on:htmx:response-error="
        if(event.detail.xhr.status === 404){
            document.getElementById('not-found').innerText = 'Block not found.';
        } else if(event.detail.xhr.status === 501){
            document.getElementById('serious-errors').innerText = 'ERROR: Invalid URL';
        } else {
           document.getElementById('serious-errors').innerText = 'Internal Server Error';
        }
    "

>
<div>></div>
  <input  type="text" name="block_url" placeholder="Are.na block url"/>
  <input  type="text" name="warc_file_name" placeholder="Warc filename"/>
  <input class="radio-option"  type="radio" name="archive_method" value="mirror"> Mirror
  <input class="radio-option" type="radio" name="archive_method" value="snapshot" checked> Snapshot

  <button 
    type="submit"
  >
    Archive
  </button>
</form>

</fieldset>
<img class="htmx-indicator" src="/static/assets/loader.gif">

<div id="response">
</div>
<div id="serious-errors"></div>
<div id="not-found"></div>
<footer>
  <ul>
    <li>
     <a href="/docs" target="_blank">Docs</a>
    </li>
    <li>
     <a href="https://github.com/pivilartisant/arena-web-archiver" target="_blank">Github</a>
    </li>
  </ul>
</footer>
</body>
<script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.6/dist/htmx.min.js"></script>
<script>console.log("Made wih <3 by https://github.com/pivilartisant")</script>
</html>